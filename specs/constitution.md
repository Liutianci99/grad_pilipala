# 项目宪法：电商物流管理系统

## 核心原则

### I. 简单优先
- 不过度设计，先让功能跑起来再优化
- YAGNI（You Aren't Gonna Need It）— 不写用不到的代码
- 毕设项目，够用就好，不追求企业级架构

### II. 统一风格
- 后端：Spring Boot 3.2 + MyBatis-Plus，统一返回 `Result<T>`
- 前端：Vue 3 组合式 API（`<script setup>`），统一用 `design.css` 共享样式
- 异常处理：`GlobalExceptionHandler` 统一捕获，Controller 不写 try-catch
- 请求：前端统一走 `@/utils/request.js`（axios 封装 + JWT 拦截）

### III. 规范先行
- 新功能必须先写规范（spec），Boss 审核通过后再写代码
- 规范聚焦 WHAT 和 WHY，不纠结 HOW
- 用 `[待确认]` 标记不确定的地方，不要猜

### IV. 先探索，再计划，再编码
- 复杂功能分三步：探索（读代码、理解现状）→ 计划（列出改动方案）→ 实施（写代码并验证）
- 小改动（修拼写、加日志、重命名）可以跳过计划，直接做
- 不确定的地方先问，不要猜着写

### V. 验证驱动
- 每次改动都要有验证方式：测试、截图对比、预期输出
- 不只说"实现功能"，要"实现功能 + 写测试 + 运行测试 + 修复失败"
- 修 bug 时：先写能复现问题的失败测试，再修复，确保测试通过

### VI. 分支管理
- 每个功能一个分支：`feat/xxx`、`fix/xxx`
- 只有 `main` 触发 CI/CD（GitHub Actions → GHCR → 服务器自动部署）
- 合并用 `--no-ff`，保留合并记录

### VII. 安全底线
- 密码必须 BCrypt 加密
- 敏感配置走环境变量，不硬编码
- JWT token 验证，401 自动登出
- 不泄露堆栈信息给前端

## 技术栈

| 层 | 技术 | 版本 |
|---|------|------|
| 后端 | Spring Boot + MyBatis-Plus | 3.2 |
| 前端 | Vue 3 + Vite | 3.x |
| 数据库 | MySQL | 8.0 |
| 地图 | 腾讯地图 Web 服务 API | - |
| 部署 | Docker + GitHub Actions + GHCR | - |
| 服务器 | Ubuntu VM（腾讯云） | - |
| 测试 | JUnit（后端）+ Vitest（前端） | - |

## 环境信息

| 项目 | 值 |
|------|------|
| 代理 | `export https_proxy=http://127.0.0.1:7890` |
| 数据库 | Docker 容器 `grad-logistics-db`，端口 3308 |
| 前端 | 端口 8888（Nginx → Vue） |
| 后端 | 端口 8080（Spring Boot） |
| 腾讯地图 Key | 环境变量 `TENCENT_MAP_API_KEY` |
| 图片存储 | Cloudflare R2 |

## 提示技巧（给 AI 助手）

### 提供具体上下文
- 指向具体文件和行号，不要泛泛描述
- 参考现有代码模式："看看 UserManagement.vue 的实现，按同样模式写"
- 描述症状而非猜测原因："用户报告登录后页面空白" > "修复登录 bug"

### 保持上下文精简
- 只读需要的文件，不要一次性读整个项目
- 上下文 >85% 时考虑重置会话
- 长对话中定期总结进度，避免 Claude 忘记早期指令

### 参考现有模式
- 写新页面前，先看已有页面的实现模式
- 写新接口前，先看同模块已有接口的风格
- 不要发明新模式，除非现有模式确实不适用

## 治理
- 本宪法优先于所有其他约定
- 修改宪法需要 Boss 同意
- 所有规范和代码必须符合本宪法

**版本**: 1.1 | **创建**: 2026-02-20 | **更新**: 2026-02-21
